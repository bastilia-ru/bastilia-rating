@page "/project/{projectId}"
@using Bastilia.Rating.Portal.Client.Components.Achievements
@using Bastilia.Rating.Portal.Client.Components.BastiliaUsers
@using Bastilia.Rating.Portal.Client.Components.Projects
@using Microsoft.AspNetCore.Components.QuickGrid

@inject ProjectNavigateHelper projectNavigateHelper
<PageTitle>Проект @project?.ProjectName</PageTitle>
@if (project is null)
{
    <LoadingSpinner />
    return;
}
<ProjectCard Project="project" />

@if (project.ProjectMemberAchievements.Count > 0)
{
    <AchievementList Project="project" />
}
else if (project.EndDate is not null)
{
    <Alert>Здесь нет ни одной ачивки. Скорее всего данные об этом проекте еще восстанавливаются с архивов.</Alert>
}

@code {
    [Parameter]
    public string ProjectId { get; set; } = null!;

    private BastiliaProjectWithDetails? project;

    protected override async Task OnParametersSetAsync()
    {
        project = await projectNavigateHelper.LoadProjectWithCheck(ProjectId);
    }
}
