@page "/members/rating"
@using Bastilia.Rating.Portal.Client.Components.BastiliaUsers
@inject IBastiliaMemberRepository Repository

<PageTitle>Рейтинг Узников</PageTitle>

<h2>Рейтинг Узников</h2>
<MemberNavLinks />

@if (members is null)
{
    <LoadingSpinner />
}
else
{
    <MemberList Members="members" />
}

@code
{
    private IReadOnlyCollection<BastiliaMember>? members;
    protected override async Task OnInitializedAsync()
    {
        members = (await Repository.GetAllAsync()).Where(x => x.ParticipateInRating && x.HistoricalRatingValue > 0).ToList();
    }
}